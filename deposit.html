<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GetCash - Recharge</title>
    <link rel="stylesheet" href="css/deposit.css">
    <link rel="stylesheet" href="css/profile.css">
</head>
<body>
    <div class="recharge-container">
        <!-- Header -->
        <div class="recharge-header">
            <div class="header-top">
                <button class="back-btn" onclick="window.location.href='index.html'">â† Back</button>
                <h1>ğŸ’° Make Recharge</h1>
            </div>
            <p class="header-subtitle">Choose your investment level and payment method</p>
        </div>

        <!-- Deposit Options -->
        <div class="recharge-content">
            <!-- Minimum Deposit Section -->
            <div class="section min-deposit-section" style="background:#f8f8fc;border-radius:12px;padding:1.5em 1em;margin-bottom:2em;box-shadow:0 2px 8px rgba(0,0,0,0.04);">
                <h2 class="section-title">ğŸ’µ Quick Deposit</h2>
                <p style="margin-bottom:1em;">If you're not ready to fully invest, you can deposit a minimum of <strong>UGX 10,000</strong> to get started.</p>
                <form id="minDepositForm" style="margin-bottom:1.5em;display:flex;flex-wrap:wrap;align-items:center;gap:1em;">
                    <label for="minDepositAmount" style="font-weight:500;">Amount (UGX):</label>
                    <input type="number" id="minDepositAmount" name="minDepositAmount" min="10000" max="1000000" value="10000" required style="width:120px;padding:0.5em;border-radius:6px;border:1px solid #ccc;">
                    <button type="submit" class="proceed-btn" style="padding:0.5em 1.5em;">Deposit Now</button>
                </form>
                <div class="account-details" style="background:#fff;border-radius:8px;padding:1em 1.2em;box-shadow:0 1px 4px rgba(0,0,0,0.03);max-width:350px;margin:auto;">
                    <div class="account-header" style="font-weight:600;font-size:1.1em;margin-bottom:0.5em;">ğŸ“± Send Payment To:</div>
                    <div class="account-info" style="display:flex;flex-direction:column;align-items:flex-start;gap:0.3em;">
                        <div class="account-number" style="font-size:1.1em;font-weight:500;color:#2d2d7a;">Account Number: <span style="font-weight:700;">0776944322</span></div>
                        <div class="account-name" style="font-size:1.1em;font-weight:500;color:#2d2d7a;">Account Name: <span style="font-weight:700;">Buttura Isaiah</span></div>
                    </div>
                </div>
            </div>
            <!-- Level Selection -->
            <div class="section">
                <h2 class="section-title">ğŸ“ˆ Select Investment Level</h2>
                <div class="level-options">
                    <!-- Level 1 Worker -->
                    <div class="level-card" data-level="worker" data-amount="75000">
                        <div class="level-header">
                            <div class="level-icon">ğŸ’¼</div>
                            <div class="level-info">
                                <h3>Level 1 Worker</h3>
                                <span class="level-badge worker">Level 2</span>
                            </div>
                        </div>
                        <div class="level-details">
                            <div class="investment-amount">UGX 75,000</div>
                            <div class="level-benefits">
                                <p>âœ… UGX 500 per task</p>
                                <p>âœ… 5 tasks daily</p>
                                <p>âœ… UGX 2,500 daily earning</p>
                            </div>
                        </div>
                    </div>

                    <!-- Senior Worker -->
                    <div class="level-card" data-level="senior" data-amount="250000">
                        <div class="level-header">
                            <div class="level-icon">â­</div>
                            <div class="level-info">
                                <h3>Senior Worker</h3>
                                <span class="level-badge senior">Level 3</span>
                            </div>
                        </div>
                        <div class="level-details">
                            <div class="investment-amount">UGX 250,000</div>
                            <div class="level-benefits">
                                <p>âœ… UGX 1,600 per task</p>
                                <p>âœ… 15 tasks daily</p>
                                <p>âœ… UGX 8,000 daily earning</p>
                            </div>
                        </div>
                    </div>

                    <!-- Expert Worker -->
                    <div class="level-card" data-level="expert" data-amount="650000">
                        <div class="level-header">
                            <div class="level-icon">ğŸ‘‘</div>
                            <div class="level-info">
                                <h3>Expert Worker</h3>
                                <span class="level-badge expert">Level 4</span>
                            </div>
                        </div>
                        <div class="level-details">
                            <div class="investment-amount">UGX 650,000</div>
                            <div class="level-benefits">
                                <p>âœ… UGX 4,200 per task</p>
                                <p>âœ… 5 tasks daily</p>
                                <p>âœ… UGX 21,000 daily earning</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Payment Method Selection -->
            <div class="section" id="paymentSection" style="display: none;">
                <h2 class="section-title">ğŸ’³ Select Payment Method</h2>
                <div class="payment-options">
                    <!-- Mobile Money -->
                    <div class="payment-card" data-method="mobile">
                        <div class="payment-icon">ğŸ“±</div>
                        <div class="payment-info">
                            <h3>Mobile Money</h3>
                            <p>MTN, Airtel, Uganda Telecom</p>
                        </div>
                        <div class="payment-select">â†’</div>
                    </div>

                    <!-- Bank Transfer -->
                    <div class="payment-card disabled" data-method="bank">
                        <div class="payment-icon">ğŸ¦</div>
                        <div class="payment-info">
                            <h3>Bank Transfer</h3>
                            <p>Coming Soon</p>
                        </div>
                        <div class="payment-select">ğŸš§</div>
                    </div>

                    <!-- WePay -->
                    <div class="payment-card disabled" data-method="wepay">
                        <div class="payment-icon">ğŸ’</div>
                        <div class="payment-info">
                            <h3>WePay</h3>
                            <p>Coming Soon</p>
                        </div>
                        <div class="payment-select">ğŸš§</div>
                    </div>

                    <!-- Crypto -->
                    <div class="payment-card disabled" data-method="crypto">
                        <div class="payment-icon">â‚¿</div>
                        <div class="payment-info">
                            <h3>Cryptocurrency</h3>
                            <p>Coming Soon</p>
                        </div>
                        <div class="payment-select">ğŸš§</div>
                    </div>
                </div>
            </div>

            <!-- Deposit Summary -->
            <div class="section" id="summarySection" style="display: none;">
                <h2 class="section-title">ğŸ“‹ Recharge Summary</h2>
                <div class="summary-card">
                    <div class="summary-item">
                        <span class="summary-label">Selected Level:</span>
                        <span class="summary-value" id="selectedLevel">-</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Investment Amount:</span>
                        <span class="summary-value" id="rechargeAmount">UGX 0</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Payment Method:</span>
                        <span class="summary-value" id="paymentMethod">-</span>
                    </div>
                    
                    <!-- Account Details Section -->
                    <div class="account-details">
                        <div class="account-header">ğŸ“± Send Payment To:</div>
                        <div class="account-info">
                            <div class="account-number">0776944322</div>
                            <div class="account-name">Buttura Isaiah</div>
                        </div>
                    </div>
                    
                    <div class="summary-item total">
                        <span class="summary-label">Total to Pay:</span>
                        <span class="summary-value" id="totalAmount">UGX 0</span>
                    </div>
                </div>
                
                <button class="proceed-btn" id="proceedBtn">
                    <span class="btn-icon">ğŸš€</span>
                    <span class="btn-text">Proceed to Payment</span>
                </button>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <a href="index.html" class="nav-item">
                <span class="nav-icon">ğŸ </span>
                <span class="nav-label">Home</span>
            </a>
            <a href="jobs.html" class="nav-item">
                <span class="nav-icon">ğŸ’¼</span>
                <span class="nav-label">Jobs</span>
            </a>
            <a href="tasks-intern.html" class="nav-item">
                <span class="nav-icon">ğŸ“‹</span>
                <span class="nav-label">Tasks</span>
            </a>
            <a href="deposit.html" class="nav-item active">
                <span class="nav-icon">ğŸ’°</span>
                <span class="nav-label">Recharge</span>
            </a>
            <a href="profile.html" class="nav-item">
                <span class="nav-icon">ğŸ‘¤</span>
                <span class="nav-label">Profile</span>
            </a>
        </nav>
    </div>

    <script src="js/api-service.js"></script>
    <script src="js/user-notifications.js"></script>
    <script src="js/deposit.js"></script>
    <script>
    // Handle minimum deposit form
    document.addEventListener('DOMContentLoaded', function() {
        var minDepositForm = document.getElementById('minDepositForm');
        if (minDepositForm) {
            minDepositForm.addEventListener('submit', function(e) {
                e.preventDefault();
                var amount = document.getElementById('minDepositAmount').value;
                if (amount < 10000) {
                    alert('Minimum deposit is UGX 10,000');
                    return;
                }
                // Prompt for account name
                var accName = prompt('Enter your account name for admin approval:');
                if (!accName) {
                    alert('Account name is required.');
                    return;
                }
                fetch('http://localhost:5000/api/deposit', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ accountName: accName, amount: amount })
                })
                .then(res => res.json())
                .then(data => {
                    alert(data.message + '\nProceed to pay UGX ' + amount + ' to 0776944322 (Buttura Isaiah).');
                })
                .catch(() => {
                    alert('Failed to submit deposit. Please try again.');
                });
            });
        }
    });
    </script>
</body>
</html>