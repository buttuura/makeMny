<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Approval - GetCash</title>
    <link rel="stylesheet" href="css/admin-approval.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="admin-header">
            <div class="header-content">
                <div class="logo-section">
                    <h1>üíº GetCash Admin</h1>
                    <span class="page-title">Deposit Approvals</span>
                </div>
                <div class="admin-actions">
                    <button class="refresh-btn" onclick="refreshApprovals()">
                        üîÑ Refresh
                    </button>
                    <a href="task-upload.html" class="nav-btn">
                        üìã Upload Tasks
                    </a>
                    <a href="admin-approval.html" class="nav-btn current">
                        ‚úÖ Approvals
                    </a>
                    <a href="Welcomepage.html" class="nav-btn">
                        üè† Home
                    </a>
                </div>
            </div>
        </header>

        <!-- Stats Overview -->
        <section class="stats-section">
            <div class="stats-grid">
                <div class="stat-card pending">
                    <div class="stat-icon">‚è≥</div>
                    <div class="stat-info">
                        <h3 id="pendingCount">0</h3>
                        <p>Pending Approvals</p>
                    </div>
                </div>
                <div class="stat-card approved">
                    <div class="stat-icon">‚úÖ</div>
                    <div class="stat-info">
                        <h3 id="approvedCount">0</h3>
                        <p>Approved Today</p>
                    </div>
                </div>
                <div class="stat-card rejected">
                    <div class="stat-icon">‚ùå</div>
                    <div class="stat-info">
                        <h3 id="rejectedCount">0</h3>
                        <p>Rejected Today</p>
                    </div>
                </div>
                <div class="stat-card revenue">
                    <div class="stat-icon">üí∞</div>
                    <div class="stat-info">
                        <h3 id="totalRevenue">0</h3>
                        <p>Total Revenue (UGX)</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Filter Controls -->
        <section class="filter-section">
            <div class="filter-controls">
                <select id="statusFilter" onchange="filterApprovals()">
                    <option value="all">All Status</option>
                    <option value="pending" selected>Pending</option>
                    <option value="approved">Approved</option>
                    <option value="rejected">Rejected</option>
                </select>
                
                <select id="levelFilter" onchange="filterApprovals()">
                    <option value="all">All Levels</option>
                    <option value="intern">Intern (UGX 10,000)</option>
                    <option value="worker">Level 1 Worker (UGX 75,000)</option>
                    <option value="senior">Senior Worker (UGX 250,000)</option>
                    <option value="expert">Expert Worker (UGX 500,000)</option>
                </select>

                <select id="dateFilter" onchange="filterApprovals()">
                    <option value="all">All Time</option>
                    <option value="today">Today</option>
                    <option value="week">This Week</option>
                    <option value="month">This Month</option>
                </select>

                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="Search by user ID or phone..." onkeyup="filterApprovals()">
                    <span class="search-icon">üîç</span>
                </div>
            </div>
        </section>

        <!-- Approvals List -->
        <section class="approvals-section">
            <div class="section-header">
                <h2>Deposit Approvals</h2>
                <div class="bulk-actions">
                    <button class="bulk-btn approve-all" onclick="bulkApprove()" disabled>
                        ‚úÖ Approve Selected
                    </button>
                    <button class="bulk-btn reject-all" onclick="bulkReject()" disabled>
                        ‚ùå Reject Selected
                    </button>
                </div>
            </div>

            <!-- Loading State -->
            <div id="loadingSpinner" class="loading-container">
                <div class="spinner"></div>
                <p>Loading approvals...</p>
            </div>

            <!-- Empty State -->
            <div id="emptyState" class="empty-state" style="display: none;">
                <div class="empty-icon">üì≠</div>
                <h3>No Approvals Found</h3>
                <p>No deposit requests match your current filters.</p>
            </div>

            <!-- Approvals List -->
            <div id="approvalsList" class="approvals-list">
                <!-- Approval items will be populated by JavaScript -->
            </div>
        </section>

        <!-- Approval Modal -->
        <div id="approvalModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="modalTitle">Review Deposit</h3>
                    <button class="close-btn" onclick="closeModal()">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="modalContent">
                        <!-- Content will be populated by JavaScript -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                    <button class="btn btn-danger" onclick="rejectDeposit()">Reject</button>
                    <button class="btn btn-success" onclick="approveDeposit()">Approve</button>
                </div>
            </div>
        </div>

        <!-- Success/Error Messages -->
        <div id="messageContainer"></div>
    </div>

    <script src="js/admin-approval.js"></script>
</body>
</html>